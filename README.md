# TSC-Project

## BOM (Bill Of Materials)

| Component  | Supplier Link | Datasheet |
|------------|---------------|-----------|
| 112A-TAAR-R03 | [Model](https://store.comet.srl.ro/Catalogue/Product/43497/) | [Datasheet](https://www.snapeda.com/parts/112A-TAAR-R03/Attend/datasheet/) |
| 744043680 | [Model](https://ro.mouser.com/ProductDetail/Wurth-Elektronik/744043680?qs=PGXP4M47uW6VkZq%252BkzjrHA%3D%3D) | [Datasheet](https://www.we-online.com/components/products/datasheet/744043680.pdf) |
| BD5229G-TR | [Model](https://componentsearchengine.com/part-view/BD5229G-TR/ROHM%20Semiconductor) | [Datasheet](https://fscdn.rohm.com/en/products/databook/datasheet/ic/power/voltage_detector/bd52xxg-e.pdf) |
| Capacitor 0402 | [Model](https://ro.mouser.com/c/passive-components/capacitors/ceramic-capacitors/?q=CC0402&srsltid=AfmBOoogjqwwed3xvp6V5-bfVkRuawirfMcnAC47L-UQdC3mnXJk097M) | [Datasheet](https://componentsearchengine.com/Datasheets/2/CC0402MRX5R5BB106.pdf) |
| CPH3225A | [Model](https://www.snapeda.com/parts/CPH3225A/Seiko+Instruments/view-part/?ref=snap) | [Datasheet](https://www.snapeda.com/parts/CPH3225A/Seiko%20Instruments/datasheet/) |
| Custom Button | [Model](https://industry.panasonic.com/global/en/products/control/switch/light-touch/number/evqpuj02k) | [Datasheet](https://industry.panasonic.com/global/en/downloads?tab=catalog&small_g_cd=203&part_no=EVQPUJ02K) |
| DS3231SN | [Model](https://www.snapeda.com/parts/DS3231SN%23/Analog+Devices/view-part/?ref=eda) | [Datasheet](https://www.snapeda.com/parts/DS3231SN%23/Analog%20Devices/datasheet/) |
| ESP32 WROVER 0805 Capacitor | [Model](https://componentsearchengine.com/part-view/SD0805S020S1R0/Kyocera%20AVX) | [Datasheet]() |
| ESP32 WROVER BME680 Sensor | [Model](https://www.snapeda.com/parts/BME680/Bosch/view-part/?welcome=home) | [Datasheet](https://www.bosch-sensortec.com/media/boschsensortec/downloads/datasheets/bst-bme680-ds001.pdf) |
| ESP32 WROVER MCP73831 Power Management | [Model](https://www.snapeda.com/parts/BME680/Bosch/view-part/?welcome=home) | [Datasheet](https://www.snapeda.com/parts/MCP73831T-2ACI/OT/Microchip/datasheet/) |
| ESP32C6 Varistor 1812 | [Model](https://ro.mouser.com/ProductDetail/EPCOS-TDK/B72520T0350K062?qs=dEfas%2FXlABIszF52uu7vrg%3D%3D) | [Datasheet](https://ro.mouser.com/ProductDetail/EPCOS-TDK/B72520T0350K062?qs=dEfas%2FXlABIszF52uu7vrg%3D%3D&srsltid=AfmBOoq4QYIa9SsFxPeCqCK4SAxNo8l_QYsiO3XkER-r9cuptx7tEupO) |
| ESP32C6 WROOM-1-N8| [Model](https://www.snapeda.com/parts/ESP32-C6-WROOM-1-N8/Espressif+Systems/view-part/?ref=eda) | [Datasheet](https://www.snapeda.com/parts/ESP32-C6-WROOM-1-N8/Espressif%20Systems/datasheet/) |
| FH34SRJ-24S-0.5SH | [Model](https://ro.mouser.com/ProductDetail/Hirose-Connector/FH34SRJ-24S-0.5SH99?qs=vcbW%252B4%252BSTIpKBl5ap9J8Fw%3D%3D) | [Datasheet](https://www.snapeda.com/parts/FH34SRJ-24S-0.5SH(99)/Hirose%20Connector/datasheet/) |
| LED Chip 0603 | [Model](https://www.snapeda.com/parts/KP-1608SURCK/Kingbright/view-part/?ref=search&t=LED%200603) | [Datasheet](https://www.snapeda.com/parts/KP-1608SURCK/Kingbright/datasheet/) |
| MAX17048G+T10 | [Model](https://www.snapeda.com/parts/MAX17048G+T10/Analog+Devices/view-part/?ref=eda) | [Datasheet](https://www.snapeda.com/parts/MAX17048G+T10/Analog%20Devices/datasheet/) |
| MBR0530 Schottky Diode | [Model](https://www.snapeda.com/parts/MBR0530/Onsemi/view-part/?ref=snap) | [Datasheet](https://www.snapeda.com/parts/MBR0530/ON%20Semiconductor/datasheet/) |
| PGB1010603MR | [Model](https://www.snapeda.com/parts/PGB1010603MR/Littelfuse/view-part/?ref=eda) | [Datasheet](https://www.snapeda.com/parts/PGB1010603MR/Littelfuse%20Inc./datasheet/) |
| QWIIC Connector | [Model](https://www.snapeda.com/parts/PRT-14417/SparkFun/view-part/) | [Datasheet](https://www.snapeda.com/parts/PRT-14417/SparkFun%20Electronics/datasheet/) |
| RCL CPOL 3528 | [Model](https://www.snapeda.com/parts/CPH3225A/Seiko+Instruments/view-part/?ref=eda) | [Datasheet](https://s3.amazonaws.com/snapeda/datasheet/TAJB475K025RNJ_AVX.pdf) |
| Resistor 0402 | [Model](https://grabcad.com/library/resistor-0402-1) | [Datasheet](https://www.yageo.com/upload/media/product/products/datasheet/rchip/PYu-RC_Group_51_RoHS_L_12.pdf) |
| SI1308EDL-T1-GE3 MOSFET | [Model](https://www.snapeda.com/parts/SI1308EDL-T1-GE3/Vishay+Siliconix/view-part/?welcome=home&ref=eda) | [Datasheet](https://www.snapeda.com/parts/SI1308EDL-T1-GE3/Vishay%20Siliconix/datasheet/) |
| SJ | [Model](https://grabcad.com/library/solder-jumpers-1) | [Datasheet]() |
| USB4110-GF-A | [Model](https://componentsearchengine.com/part-view/USB4110-GF-A/GCT%20(GLOBAL%20CONNECTOR%20TECHNOLOGY)) | [Datasheet](https://gct.co/files/drawings/usb4110.pdf) |
| USBLC6-2SC6Y | [Model](https://www.snapeda.com/parts/USBLC6-2SC6Y/STMicroelectronics/view-part/?welcome=home&ref=eda) | [Datasheet](https://www.snapeda.com/parts/USBLC6-2SC6Y/STMicroelectronics/datasheet/) |
| W25Q512JVEIQ | [Model](https://www.snapeda.com/parts/W25Q512JVEIQ/Winbond+Electronics/view-part/?ref=eda) | [Datasheet](https://www.winbond.com/resource-files/W25Q512JV%20SPI%20RevB%2006252019%20KMS.pdf) |
| XC6220A331MR-G | [Model](https://componentsearchengine.com/part-view/XC6220A331MR-G/Torex) | [Datasheet](https://product.torexsemi.com/system/files/series/xc6220.pdf) |

## Power Consumption Estimation
![Block Diagram](https://github.com/user-attachments/assets/47cd3ff1-c6d8-4b44-916e-44f02d7c4b68)

## Hardware Description  

1. Microcontroller – ESP32-C6-WROOM-1-N8
The ESP32-C6 serves as the main processing unit, managing overall system operations, interfacing with
sensors and external modules, and overseeing power management tasks.
Architecture: 32-bit RISC-V
Clock Speed: 160 MHz
Wireless Connectivity: Wi-Fi 6 (2.4 GHz), Bluetooth 5.0

3. Power Management & Battery Battery Type: Li-Po (Lithium Polymer)
Capacity: 3.7V, 1800mAh
Charging Circuit: MCP73831T
Input Voltage: 5V via USB-C
Protection Features: Overcharge and deep discharge protection
Voltage Regulator: LDO regulator ensures a stable 3.3V power supply to all components.

4. Display - E-Paper (E-Ink) Screen
Size: 7.5 inches
Resolution: 800x480 pixels
Communication Interface: SPI

5. SD Card Module
Type: MicroSD (Supports FAT32)
Interface: SPI

6. External NOR Flash
Capacity: 64MB
Interface: SPI

7. Environmental Sensor - BME688
Functions: Measures temperature, humidity, air pressure, and gas levels.
Communication Interface: I2C 

8. Real-Time Clock (RTC) - DS3231SN
Functionality: Maintains time and date even when the system is powered off.
Communication Interface: I2C 

9. USB-C Connector & ESD Protection
Functionality: Provides power input and data transfer capability.
Protection: Integrated ESD protection and Schottky diode for reverse polarity safety. 

10. Buttons & User Input
Tactile Push Buttons

11. Communication Interfaces
GPIO: Used for button controls and general I/O operations.
SPI: Used for SD card, external flash memory, and e-paper display.
I2C: Used for the BME688 environmental sensor and DS3231SN RTC module.
UART: Used for debugging and serial communication.
Wi-Fi & Bluetooth: Provided by ESP32-C6, allowing wireless connectivity.

## Power Consumption Estimation

| Component                | Current Draw (mA) | Voltage (V) | Power (mW) |
|--------------------------|------------------|-------------|------------|
| ESP32-C6 (Wi-Fi active)  |200               |3.3          |660
| E-Paper Display (Updating)               | 40               | 3.3         | 132        |
| BME688 Sensor (Measuring)| 3.1              | 3.3         | 10.23      |
| RTC Module (Active)      | 0.15             | 3.3         | 0.495      |
| SD Card (Active)         | 50               | 3.3         | 165        |
| Externar NOR Flash       | 25               | 3.3         | 82.5       |
| Total Estimated Power Consumption               | ~318.5mA         | 3.3         | 1050.72    |

## ESP32-C6 Pin Mapping  

| Component                | ESP32-C6 Pin(s) | Interface | Purpose |
|--------------------------|----------------|-----------|---------|
| **E-Paper Display**      | IO7 (MOSI), IO6 (SCK), IO10 (CS), IO5 (DC), IO23 (RST), IO3 (BUSY) | SPI | Transfers image data to the display and controls its state. |
| **MicroSD Card**         | IO7 (MOSI), IO6 (SCK), IO4 (SS_SD), IO2 (MISO) | SPI | Allows storage and retrieval of e-book files. |
| **Environmental Sensor (BME688)** | IO21 (SDA), IO22 (SCL) | I2C | Reads temperature, humidity, pressure, and air quality data. |
| **RTC Module (DS3231)**  | IO21 (SDA), IO22 (SCL), IO18 (RST), IO1 (32KHz), IO0 (INT_RTC) | I2C | Keeps track of time even when ESP32 is off. |
| **External NOR Flash**   | IO11 (CS), IO6 (SCK), IO2 (MISO), IO7 (MOSI) | SPI | Provides additional storage for application data. |
| **Battery Monitoring**   | IO21 (SDA), IO22 (SCL) | I2C | Reads battery voltage and charge status. |
| **USB-C Connection**     | GPIOs through voltage regulation | USB | Powers and programs the ESP32-C6. |
| **Control Buttons**      | IO9 (BOOT), IO15 (CHANGE), EN (RESET) | GPIO | User input for device interactions. |
|

## Additional Design Notes
### Footprint Adjustments
Diode (SMD-Hole): The original footprint had pad holes that were too small, which would have caused soldering issues.
The pad size was updated to 35mil x 190mil to ensure manufacturability and a reliable electrical connection.

U4 – MAX17048G+T10: The VBAT power trace was designed with a width of 0.3mm, based on implementation constraints
However, the footprint had pin widths of only 0.27mm, resulting in asymmetry and inconsistent routing. The pin sizes
were adjusted to match the trace width and maintain design symmetry.

### Routing & Ground Plane
Power traces were routed only on the top layer, which required the use of approximately 110 vias to allow for
signal routing on the bottom layer.

The ground plane (GND) was added after routing was completed, applied to both top and bottom layers to ensure
low-impedance grounding and reduced EMI.

### Component Placement
Test pads (TPs) were placed near the edges of the board and close to major components for easy debugging access.

### Schematic & 3D Model Issues
After completing the routing process, updates to the 3D models led to pin order reversals in certain 2-pin components, 
which disrupted existing connections. The issue was resolved by rotating the affected components 180° and re-aligning their 
pins accordingly.

### Enclosure & 3D Integration
3D components were imported using two methods, depending on how frequently each part appeared in the schematic.
